plugins {
    id 'maven-publish'
    id 'net.woggioni.gradle.multi-release-jar'
    id 'org.jetbrains.kotlin.jvm'
}


allprojects {
    group = "woggioni.net"
    version = getProperty('version.klevtree')

    repositories {
        maven {
            url = woggioniMavenRepositoryUrl
        }
        mavenCentral()
    }
}

ext {
    setProperty('jpms.module.name', 'net.woggioni.klevtree')
}

dependencies {
    implementation group: 'net.woggioni', name: 'jwo', version: getProperty('version.jwo')

    testImplementation group: 'org.junit.jupiter', name: 'junit-jupiter-api', version: getProperty('version.junitJupiter')
    testImplementation group: 'org.junit.jupiter', name: 'junit-jupiter-params', version: getProperty('version.junitJupiter')
    testRuntimeOnly group: 'org.junit.jupiter', name: 'junit-jupiter-engine', version: getProperty('version.junitJupiter')
    testRuntimeOnly group: 'org.apache.logging.log4j', name: 'log4j-slf4j-impl', version: getProperty('version.log4j2')
}

compileJava {
    options.release = 8
    options.compilerArgs << '-parameters'
}

compileKotlin {
    kotlinOptions.with {
        jvmTarget = '1.8'
    }
}

test {
    useJUnitPlatform()
}

wrapper {
    distributionType = Wrapper.DistributionType.BIN
    gradleVersion = getProperty('version.gradle')
}

publishing {
    repositories {
        maven {
            url = 'https://mvn.woggioni.net/'
        }
    }
    publications {
        maven(MavenPublication) {
            from(components["java"])
        }
    }
}
