plugins {
    id 'maven-publish'
    alias catalog.plugins.kotlin
    alias catalog.plugins.multi.release.jar
}


allprojects {
    group = "net.woggioni"
    version = getProperty('klevtree.version')

    repositories {
        maven {
            url = woggioniMavenRepositoryUrl
        }
        mavenCentral()
    }
}

ext {
    setProperty('jpms.module.name', 'net.woggioni.klevtree')
}

dependencies {
    implementation catalog.jwo

    testImplementation catalog.junit.jupiter.api
    testImplementation catalog.junit.jupiter.params
    testRuntimeOnly catalog.junit.jupiter.engine
    testRuntimeOnly catalog.log4j.slf4j18.impl
}

compileJava {
    options.release = 8
    options.compilerArgs << '-parameters'
}

compileKotlin {
    kotlinOptions.with {
        jvmTarget = '1.8'
    }
}

test {
    useJUnitPlatform()
}

wrapper {
    distributionType = Wrapper.DistributionType.BIN
    gradleVersion = getProperty('gradle.version')
}

publishing {
    repositories {
        maven {
            url = 'https://mvn.woggioni.net/'
        }
    }
    publications {
        maven(MavenPublication) {
            from(components["java"])
        }
    }
}
